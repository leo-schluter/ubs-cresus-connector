{
  "description": "Configuration des règles de nettoyage des libellés pour UBS→Cresus",
  "version": "1.0",

  "enabled": true,

  "rules": {
    "simple_replacements": [
      {
        "description": "Supprimer 'Réf. QRR:' du début",
        "search": "Réf. QRR: ",
        "replace": "",
        "enabled": true
      },
      {
        "description": "Supprimer 'Motif du paiement:'",
        "search": "Motif du paiement: ",
        "replace": "",
        "enabled": true
      },
      {
        "description": "Supprimer 'No de transaction:'",
        "search": "No de transaction:",
        "replace": "",
        "enabled": true
      },
      {
        "description": "Supprimer 'N° de transaction:'",
        "search": "N° de transaction:",
        "replace": "",
        "enabled": true
      },
      {
        "description": "Remplacer séparateur | par tiret",
        "search": " | ",
        "replace": " - ",
        "enabled": false
      }
    ],

    "regex_replacements": [
      {
        "description": "Supprimer références IBAN complètes",
        "pattern": "Account no\\. IBAN:\\s*[A-Z0-9 ]+;?",
        "replace": "",
        "enabled": true
      },
      {
        "description": "Supprimer codes BIC/SWIFT",
        "pattern": "BI\\s*C\\s*/\\s*SWIFT\\s+\\w+",
        "replace": "",
        "enabled": true
      },
      {
        "description": "Supprimer informations de coûts",
        "pattern": "Coûts:\\s*[^;]+;?",
        "replace": "",
        "enabled": true
      },
      {
        "description": "Supprimer adresses postales (CH-XXXX)",
        "pattern": ";[^;]*\\d{4}[^;]*;[^;]*$",
        "replace": "",
        "enabled": true
      },
      {
        "description": "Supprimer annotations techniques (*a), (*b), etc.",
        "pattern": "\\(\\*[a-z]\\)[^;]*",
        "replace": "",
        "enabled": true
      }
    ],

    "custom_replacements": [
      {
        "description": "Exemple: Renommer VILLE DE GENEVE (remplacement partiel)",
        "search": "VILLE DE GENEVE",
        "replace": "Ville de Genève",
        "full_replacement": false,
        "enabled": false
      },
      {
        "description": "Exemple: Simplifier tout libellé contenant SIG en 'SIG'",
        "search": "SERVICES INDUSTRIELS DE GENEVE",
        "replace": "SIG",
        "full_replacement": true,
        "enabled": false,
        "comment": "Si le libellé contient 'SERVICES INDUSTRIELS DE GENEVE', TOUT le libellé devient 'SIG'"
      },
      {
        "description": "Exemple: Simplifier factures Swisscom",
        "search": "SWISSCOM",
        "replace": "Swisscom",
        "full_replacement": true,
        "enabled": false,
        "comment": "Tout libellé contenant 'SWISSCOM' devient simplement 'Swisscom'"
      },
      {
        "description": "Exemple: Tronquer virements salaire",
        "search": "Salaire",
        "replace": "Salaire mensuel",
        "full_replacement": true,
        "enabled": false
      }
    ],

    "cleanup_options": {
      "trim_whitespace": true,
      "remove_duplicate_spaces": true,
      "remove_trailing_semicolons": true,
      "remove_trailing_colons": true,
      "remove_empty_parentheses": true,
      "max_length": 0,
      "comment": "max_length: 0 = pas de limite, sinon tronquer à X caractères"
    }
  },

  "output_format": {
    "separator": " | ",
    "comment": "Séparateur entre les parties du libellé (ex: bénéficiaire | motif)"
  },

  "examples": {
    "before": "VILLE DE GENEVE | Réf. QRR: 12 34567 89012 34567 89012 34567 | Motif du paiement: Facture eau; Account no. IBAN: CH93 0076 2011 6238 5295 7; BIC/SWIFT POFICHBEXXX",
    "after": "VILLE DE GENEVE | Facture eau"
  },

  "instructions": {
    "fr": [
      "1. Activez/désactivez les règles avec 'enabled': true/false",
      "2. Les 'simple_replacements' sont des remplacements de texte simples",
      "3. Les 'regex_replacements' utilisent des expressions régulières",
      "4. Les 'custom_replacements' sont pour vos cas spécifiques",
      "5. Ajoutez vos propres règles en copiant le format existant",
      "6. L'ordre des règles est important: elles sont appliquées séquentiellement",
      "7. Pour désactiver tout le système: mettre 'enabled': false en haut du fichier",
      "",
      "MODE FULL_REPLACEMENT (nouveau!):",
      "- 'full_replacement': false (défaut) = Remplace uniquement le texte qui match",
      "  Exemple: 'VILLE DE GENEVE | Facture' → 'Ville de Genève | Facture'",
      "",
      "- 'full_replacement': true = Si match trouvé, remplace TOUT le libellé",
      "  Exemple: 'SWISSCOM SA | Réf: 12345 | Facture télécom' → 'Swisscom'",
      "",
      "Cas d'usage typique pour full_replacement:",
      "- Tronquer les libellés trop longs en noms courts",
      "- Simplifier les fournisseurs récurrents (SIG, Swisscom, etc.)",
      "- Uniformiser les virements de salaire, loyers, etc."
    ]
  }
}
